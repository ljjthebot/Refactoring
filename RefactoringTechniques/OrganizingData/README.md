# 数据组织

这些重构技巧有助于处理数据，将基本数据类型替换为具有丰富功能的类。

另一个重要的结果是解开类之间的关联，使类更具可移植性和可重用性。

## [封装字段](SelfEncapsulateField.md)

**问题：** 在类内部直接访问私有字段。

**解决方案：** 为字段创建 getter 和 setter，并仅使用它们来访问字段。

## [用对象替换数据值](ReplaceDataValuewithObject.md)

**问题：** 一个类（或一组类）包含一个数据字段。该字段具有自己的行为和相关数据。

**解决方案：** 创建一个新类，将旧字段及其行为放入该类，并将该类的对象存储在原始类中。

## [将值改为引用](ChangeValuetoReference.md)

**问题：** 有许多相同实例的单个类需要替换为单个对象。

**解决方案：** 将相同的对象转换为单个引用对象。

## [将引用改为值](ChangeReferencetoValue.md)

**问题：** 有一个引用对象，它太小并且改变不频繁，不值得管理其生命周期。

**解决方案：** 将其转换为值对象。

## [用对象替换数组](ReplaceArraywithObject.md)

**问题：** 有一个包含各种类型数据的数组。

**解决方案：** 用一个对象替换数组，该对象将为每个元素有单独的字段。

## [复制观察到的数据](DuplicateObservedData.md)

**问题：** 领域数据存储在负责 GUI 的类中吗？

**解决方案：** 那么最好将数据分离到独立的类中，确保领域类和 GUI 之间的连接和同步。

## [将单向关联改为双向](ChangeUnidirectionalAssociationtoBidirectional.md)

**问题：** 两个类都需要使用对方的功能，但它们之间的关联是单向的。

**解决方案：** 在需要的类中添加缺失的关联。

## [将双向关联改为单向](ChangeBidirectionalAssociationtoUnidirectional.md)

**问题：** 两个类之间存在双向关联，但其中一个类不使用另一个类的功能。

**解决方案：** 删除未使用的关联。

## [用符号常量替换魔法数字](ReplaceMagicNumberwithSymbolicConstant.md)

**问题：** 代码使用一个具有特定含义的数字。

**解决方案：** 用具有可读名称的常量替换这个数字，解释数字的含义。

## [封装字段](EncapsulateField.md)

**问题：** 有一个公共字段。

**解决方案：** 将字段设为私有，并为其创建访问方法。

## [封装集合](EncapsulateCollection.md)

**问题：** 一个类包含一个集合字段，并有一个简单的 getter 和 setter 用于处理该集合。

**解决方案：** 使 getter 返回的值为只读，并创建方法用于添加/删除集合元素。

## [用类替换类型代码](ReplaceTypeCodewithClass.md)

**问题：** 一个类有一个包含类型代码的字段。该类型的值不在运算条件中使用，也不影响程序行为。

**解决方案：** 创建一个新类，使用其对象代替类型代码的值。

## [用子类替换类型代码](ReplaceTypeCodewithSubclasses.md)

**问题：** 有一个编码类型直接影响程序行为（该字段的值在条件语句中触发各种代码）。

**解决方案：** 为编码类型的每个值创建子类。然后将原始类中与这些子类相关的行为提取到这些子类中。用多态性替换控制流代码。

## [用状态/策略替换类型代码](ReplaceTypeCodewithStateStrategy.md)

**问题：** 有一个编码类型影响行为，但不能使用子类来摆脱它。

**解决方案：** 用状态对象替换类型代码。如果需要用类型代码替换字段值，则“插入”另一个状态对象。

## [用字段替换子类](ReplaceSubclasswithFields.md)

**问题：** 子类只在其（常量返回的）方法中有所不同。

**解决方案：** 在父类中用字段替换方法，并删除子类。
```