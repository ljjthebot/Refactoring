# 重构：封装字段

## 问题

您有一个公共字段。

## 解决方案

将字段设置为私有，并为其创建访问方法。

### 重构前
```java
class Person {
  public String name;
}
```

### 重构后
```java
class Person {
  private String name;

  public String getName() {
    return name;
  }

  public void setName(String arg) {
    name = arg;
  }
}
```

## 为何要进行重构

面向对象编程的支柱之一是封装，即隐藏对象数据的能力。否则，所有对象都将是公共的，其他对象可以在不进行任何检查和平衡的情况下获取和修改对象的数据！数据与与其相关的行为分离，程序部分的模块性受到损害，维护变得复杂。

## 优势

如果组件的数据和行为密切相关且位于代码中的相同位置，您将更容易维护和开发此组件。

您还可以执行与访问对象字段相关的复杂操作。

## 注意事项

在某些情况下，由于性能考虑，封装是不明智的。这些情况很少见，但当它们发生时，这一点非常重要。

假设您有一个包含具有 x 和 y 坐标的对象的图形编辑器。这些字段未来不太可能更改。而且，程序涉及许多不同的对象，这些对象中存在这些字段。因此，直接访问坐标字段可以节省大量 CPU 周期，否则这些周期将被调用访问方法占用。

作为这种不寻常情况的例子，Java 中有 Point 类。此类的所有字段都是公共的。

## 如何进行重构

1. 为字段创建一个 getter 和 setter。

2. 查找字段的所有调用。使用 getter 替换对字段值的接收，并使用 setter 替换设置新字段值。

3. 替换所有字段调用后，将字段设置为私有。

## 后续步骤

封装字段只是将数据和涉及此数据的行为靠近的第一步。在为访问字段创建简单方法之后，应重新检查调用这些方法的地方。很可能这些区域的代码看起来在访问方法中更为适当。