# 将引用改为值

## 问题

有一个引用对象，其规模太小且更改不频繁，无法证明其生命周期管理的必要性。

## 解决方案

将其转换为值对象。

### 将引用改为值 - 重构前
### 将引用改为值 - 重构后

## 为何要进行重构

从引用切换为值的灵感可能来自使用引用的不便。引用需要您进行管理：

- 它们始终需要从存储中请求必要的对象。
- 在内存中，与值相比，引用可能不太方便。
- 与值相比，在分布式和并行系统上使用引用尤为困难。

如果您更愿意拥有不可更改的对象而不是在其生命周期内可能更改状态的对象，则值特别有用。

## 优势

对象的一个重要属性是它们应该是不可更改的。对于返回对象值的每个查询，应收到相同的结果。如果这是真的，那么如果有许多对象表示相同的事物，就不会出现问题。

值更容易实现。

## 缺点

如果值是可更改的，请确保在任何对象更改时更新表示相同实体的所有其他对象中的值。这是如此繁琐，以至于为此目的创建引用更容易。

## 如何进行重构

1. 使对象不可更改。对象不应该有任何更改其状态和数据的 setter 或其他方法（此时可能需要使用“删除设置方法”）。将数据分配给值对象的字段的唯一位置是构造函数。

2. 创建一个比较方法，以便比较两个值。

3. 检查是否可以删除工厂方法并将对象构造函数设为公共的。