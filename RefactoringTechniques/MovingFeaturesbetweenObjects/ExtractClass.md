# 提取类（Extract Class）

## 问题
一个类的工作相当于两个类，导致代码尴尬。

## 解决方案
相反，创建一个新类，并将负责相关功能的字段和方法放入其中。

这样做的目的是将原始类中的功能拆分到一个新类中，提高代码的组织性和可维护性。

## 为何进行重构

类始终是清晰易懂的。它们完成它们的工作，如同不干涉其他类的工作一样。但随着程序的扩展，会添加方法，然后是字段... 最终，一些类执行的职责超出了最初的预期。

## 优势
这种重构方法有助于保持单一职责原则。类的代码将更为明显和易于理解。

单一职责的类更可靠，更容忍变化。例如，假设你有一个负责十个不同事务的类。当你修改这个类以使其对其中一个事务更好时，你可能会破坏其他九个事务。

## 缺点
如果使用这种重构技术“过火”，最终可能不得不使用“内联类”。

## 如何进行重构
在开始之前，决定要如何拆分类的职责。

1. 创建一个新类，包含相关的功能。

2. 在旧类和新类之间建立关系。最好是单向关系，这样可以在没有问题的情况下重用第二个类。尽管如此，如果认为需要双向关系，也可以设置。

3. 对于要移动到新类的每个字段和方法，使用“Move Field”和“Move Method”。对于方法，从私有方法开始，以降低出现大量错误的风险。尽量一次只移动一小部分，并在每次移动后测试结果，以避免在最后堆积错误修复。

4. 完成移动后，再次查看生成的类。一个负责的旧类可能会因责任的改变而被重命名以增加清晰度。再次检查是否可以摆脱双向类关系（如果存在的话）。

5. 同时考虑从外部访问新类的问题。你可以通过使其私有并通过旧类的字段进行管理，从而完全隐藏类，使其对客户端不可见。另外，你也可以使其成为公共类，允许客户端直接更改值。这取决于当对新类的值进行意外直接更改时，对旧类的行为是否安全。
