# 引入外加方法（Introduce Foreign Method）

## 问题
一个实用程序类中没有你需要的方法，而你又不能将该方法添加到该类中。

## 解决方案
将方法添加到客户端类，并将实用程序类的对象作为参数传递给它。


## 引入外加方法（Introduce Foreign Method）

## 为何重构
你有一段代码使用某个类的数据和方法。你意识到，如果将代码移动到该类中的一个新方法中，代码将会更加清晰且运行得更好。但是你不能将该方法添加到该类中，例如，该类位于第三方库中。

当你想要移动到方法中的代码在程序中的不同位置重复出现时，这个重构的回报很大。

由于你将实用程序类的对象传递给新方法的参数，你可以访问它的所有字段。在方法内部，你可以做几乎一切你想做的事情，就好像该方法是实用程序类的一部分一样。

## 好处
- 消除代码重复。如果你的代码在多个地方重复出现，你可以用方法调用替换这些代码片段。即使考虑到外加方法位于非最佳位置，这仍然比重复要好。

## 缺点
对于维护代码的人来说，为什么在客户端类中有实用程序类的方法的原因并不总是很清晰。如果该方法可以在其他类中使用，你可以通过创建包装器类并将方法放在其中获益。当存在多个此类实用程序方法时，这也是有益的。引入局部扩展可以帮助解决这个问题。

## 如何重构
1. 在客户端类中创建一个新方法。
2. 在这个方法中创建一个参数，用于传递实用程序类的对象。如果可以从客户端类中获取此对象，则无需创建此参数。
3. 将相关的代码片段提取到此方法中，并将它们替换为方法调用。
4. 确保在方法的注释中留下"Foreign method"标签，并提醒如果以后可能的话将该方法放在实用程序类中。这将有助于那些将来维护软件的人更容易理解为什么该方法位于特定类中。
