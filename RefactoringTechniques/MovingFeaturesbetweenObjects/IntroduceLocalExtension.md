# 介绍本地扩展

## 问题
一个实用程序类不包含您需要的一些方法。但是您无法将这些方法添加到该类。

## 解决方案
创建一个新的类，其中包含所需的方法，并将其设置为实用程序类的子类或包装类。

## 为何进行重构

在使用的类中缺少您需要的方法。更糟糕的是，您无法添加这些方法（例如，因为这些类位于第三方库中）。有两种解决方法：

1. 从相关类创建一个子类，其中包含所需的方法，并从父类继承其他所有内容。这种方法更简单，但有时会被实用程序类本身阻挡（由于是 final 类）。

2. 创建一个包含所有新方法的包装类，并在其他地方将委托交给实用程序类的相关对象。这种方法更繁琐，因为您不仅需要编写代码以维护包装和实用程序对象之间的关系，还需要大量简单的委托方法，以模拟实用程序类的公共接口。

# 优势

通过将附加方法移动到一个单独的扩展类（包装或子类），您避免了将不适合的代码混杂到客户类中。程序组件更一致且更可重用。

# 如何进行重构

1. 创建一个新的扩展类：

   - 选项 A：将其设置为实用程序类的子类。
   
   - 选项 B：如果决定创建一个包装类，为其创建一个字段，用于存储将进行委托的实用程序类对象。在使用此选项时，还需要创建重复实用程序类的公共方法并包含对实用程序对象方法的简单委托。

2. 创建一个使用实用程序类构造函数参数的构造函数。

3. 还可以创建一个替代的“转换”构造函数，其参数仅为原始类对象。这将有助于用扩展替换原始类的对象。

4. 在类中创建新的扩展方法。将其他类的外来方法移动到此类中，或者如果其功能已经存在于扩展中，则删除外来方法。

5. 在需要其功能的地方，使用新的扩展类替代实用程序类。