# 提取子类
## 问题
一个类具有仅在某些情况下使用的特性。

## 解决方案
创建一个子类，并在这些情况下使用它。

## 提取子类 - 之前
[提取子类 - 之前]

## 提取子类 - 之后
[提取子类 - 之后]

## 为什么要重构
您的主要类具有用于实现类的某种罕见用例的方法和字段。尽管这种情况很少见，但该类对其负责，并将相关的所有字段和方法移动到完全独立的类中是错误的。但它们可以被移动到一个子类中，这正是我们将通过这种重构技术完成的事情。

## 好处
- 快速轻松地创建一个子类。
- 如果您的主要类目前正在实现多个这样的特殊情况，可以创建几个独立的子类。

## 缺点
尽管看似简单，继承可能会导致死胡同，如果您必须分离多个不同的类层次结构。例如，如果您有具有根据狗的大小和毛发而有所不同行为的类Dogs，您可以提取出两个层次结构：

按大小分：Large、Medium 和 Small

按毛发分：Smooth 和 Shaggy

一切似乎都很好，但是一旦您需要创建既是Large又是Smooth的狗时，问题就会出现，因为您只能从一个类中创建对象。话虽如此，您可以通过使用组合而不是继承来避免此问题（请参阅策略模式）。换句话说，Dog类将具有两个组件字段，即大小和毛发。您将在这些字段中插入来自必要类的组件对象。因此，您可以创建一个具有LargeSize和ShaggyFur的狗。

## 如何重构
1. 从感兴趣的类创建一个新的子类。
2. 如果需要额外的数据来创建子类的对象，请创建一个构造函数并将必要的参数添加到其中。不要忘记调用构造函数的父类实现。
3. 查找对父类构造函数的所有调用。当需要子类的功能时，用子类构造函数替换父类构造函数。
4. 通过“Push Down Method”和“Push Down Field”将必要的方法和字段从父类移动到子类。首先移动方法更简单。这样，字段在整个过程中仍然可以访问：在移动之前从父类，移动完成后从子类本身。
5. 子类准备就绪后，找到所有控制功能选择的旧字段。通过使用多态替换字段在其中使用的所有运算符来删除这些字段。一个简单的例子：在Car类中，您有字段isElectricCar，并且根据它，在refuel()方法中汽车要么加满汽油，要么用电充电。在重构后，删除了isElectricCar字段，并且Car和ElectricCar类将具有各自的refuel()方法实现。