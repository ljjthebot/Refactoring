# 提取方法（Extract Method）

## 问题
存在一个可以组合在一起的代码片段。

## 解决方案
将这段代码移到一个新的独立方法（或函数）中，并用对该方法的调用替换原来的代码。

```python
def printOwing(self):
    self.printBanner()

    # print details
    print("name:", self.name)
    print("amount:", self.getOutstanding())
```

```python
def printOwing(self):
    self.printBanner()
    self.printDetails(self.getOutstanding())

def printDetails(self, outstanding):
    print("name:", self.name)
    print("amount:", outstanding)
```


## 为何进行重构

方法中包含的代码行数越多，理解方法的功能就越困难。这是进行这种重构的主要原因。

除了消除代码中的瑕疵之外，提取方法还是许多其他重构方法中的一步。

## 好处

- 代码更易读！确保为新方法命名，以描述方法的目的：`createOrder()`、`renderCustomerInfo()`等。

- 减少代码重复。通常在方法中找到的代码可以在程序的其他地方重复使用。因此，可以用对新方法的调用替换重复的代码。

- 隔离代码的独立部分，这意味着错误的可能性较小（例如，如果错误地修改了变量）。

## 如何进行重构

1. 创建一个新方法，并以使其目的显而易见的方式命名。

2. 将相关的代码片段复制到新方法中。从原始位置删除该片段，然后在那里放置对新方法的调用。

3. 查找在此代码片段中使用的所有变量。如果它们在片段内声明且在其外部未使用，只需将它们保持不变——它们将成为新方法的局部变量。

4. 如果变量在提取的代码之前声明，您需要将这些变量传递给新方法的参数，以便使用以前包含在其中的值。有时通过使用“用查询替换临时变量”可以更轻松地摆脱这些变量。

5. 如果您看到一个局部变量在提取的代码中以某种方式发生变化，这可能意味着以后在主方法中需要这个变化的值。仔细检查！如果确实是这种情况，请将该变量的值返回到主方法以保持一切正常运行。
